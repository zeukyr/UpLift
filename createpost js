
//NavBar
function redirectToHome() {
    window.location.replace("index.html");
}
function redirectToAbout() {
    window.location.replace("about.html");
}

function redirectToForum() {
    window.location.replace("calgaryforum.html");
}

function clearPosts() {
    // Clear the localStorage
    localStorage.removeItem('posts');

    // Clear the posts from the DOM
    const postsContainer = document.getElementById('posts');
    postsContainer.innerHTML = '';
}

function createPost() {
    window.location.replace("createpost.html");
}

function addPost() {
    window.location.replace("calgaryforum.html");
    const postTitle = document.getElementById('postTitle').value; 
    const postContent = document.getElementById('postContent').value; 
    const postCategory = document.getElementById('postCategory').value;
    // stores the values entered by user

    const post = {
        title: postTitle,
        content: postContent,
        category: postCategory,
        author: "Turtle",
        date: new Date().toLocaleString()
    };
    // separates it into components. Author can be replaced by username once merged.


    let posts = JSON.parse(localStorage.getItem('posts')) || [];
    posts.push(post);
    localStorage.setItem('posts', JSON.stringify(posts));
    // I think this turns it into a string?
}

document.addEventListener('DOMContentLoaded', () => {
    const postsContainer = document.getElementById('posts');
    let posts = JSON.parse(localStorage.getItem('posts')) || [];


    posts.forEach(post => {
        const postElement = document.createElement('div');
        postElement.className = 'subforum-row';


        let imgpath;
        switch(post.category) {
            case 'social':
                imgpath = 'images/social.png';
                break;
            case 'advice':
                imgpath = 'images/advice.png';
                break;
            case 'textbook':
                imgpath = 'images/textbook.png';
                break;
        }
        // chooses image icon based on the category


        postElement.innerHTML = `
            <div class="subforum-icon subforum-column center">
                <img src="${imgpath}" alt="${post.category}">
            </div>
            <div class="subforum-description subforum-column">
                <h4><a href="#">${post.title}</a></h4>
                <p>${post.content}</p>
                <span>0 Upvotes | 0 Replies</span>
            </div>
            <div class="subforum-info subforum-column">
                by <a href="">${post.author}</a> 
                on <small>${post.date}</small>
            </div>
        `;
        // formatting with variables plugged in


        const hr = document.createElement('hr');
        hr.className = 'subforum-divider';
        // divider for each post


        postsContainer.appendChild(postElement);
        postsContainer.appendChild(hr);
        // not completely sure how this works

    });
});
